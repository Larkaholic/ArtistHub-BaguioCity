<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artist Hub</title>
    <link href="https://fonts.googleapis.com/css2?family=Rubik+Dirt&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/swiper/swiper-bundle.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="stylesheet" href="./css/history.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" href="https://github.com/Larkaholic/ArtistHub-BaguioCity/blob/master/images/artisthubLogo.png?raw=true" type="image/x-icon">
    
    <!--Added For Disable Right Click-->
    <script>document.addEventListener('contextmenu', function(e) {
        if (e.target.tagName === 'IMG', 'VIDEO') {
            e.preventDefault();
        }
    });</script>
    <script type="module">
        import { initNavigation } from './js/navigation.js';
        import { initProfileNavigation } from './js/profile-navigation.js';
        initNavigation();
        initProfileNavigation();
    </script>
</head>
<body class="bg-cover">
    <header class="flex fixed z-50 max-w-full max-h-full bg-white bg-clip-padding backdrop-filter backdrop-blur-md bg-opacity-70 backdrop-saturate-100 backdrop-contrast-125 bg-blend-overlay rounded-full right-10 left-10 mt-5 p-2 justify-evenly" data-aos="fade-down" data-aos-duration="1000">
        <div class="flex">
            <img src="https://raw.githubusercontent.com/Larkaholic/ArtistHub-BaguioCity/master/images/artisthubOrange.png" alt="HeaderLogo" onclick="navToEvent('index.html')" style="cursor: pointer; height: 70px;" data-aos="zoom-in" data-aos-delay="200">
        </div>

        <div class="sm:hidden flex items-center">
            <button onclick="toggleNav()" class="burger-icon">
                <svg class="w-8 h-8 text-black" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
        </div>

        <nav class="hidden sm:flex sm:items-center sm:space-x-5">
            <ul class="text-black text-md flex space-x-10 text-xl font-semibold justify-self-center">
                <li class="nav-item p-1 rounded-lg">
                    <a href="javascript:void(0)" onclick="navToEvent('./index.html')">Home</a>
                </li>
                <li class="nav-item p-1 rounded-lg">
                    <a href="javascript:void(0)" onclick="navToEvent('./index.html#events')">Events</a>
                </li>
                <li class="nav-item p-1 rounded-lg">
                    <a href="javascript:void(0)" onclick="navToEvent('./shop/shop.html')">Shop</a>
                </li>
                <li class="nav-item p-1 rounded-lg">
                    <a href="javascript:void(0)" onclick="handleEditProfile()">Profile</a>
                </li>
            </ul>
            
        </nav>
        <nav class="hidden sm:flex sm:items-center sm:space-x-5">
            <ul class="text-black text-md flex space-x-28 text-xl font-semibold">
                <li class="nav-item hover:bg-green-500 p-1 rounded-lg admin-button" style="display: none;">
                    <a href="javascript:void(0)" onclick="navToEvent('./admin/dashboard.html')">Admin</a>
                </li>
                <li class="login-button">
                    <button onclick="toggleLoginFlyout(event)" class="nav-login bg-[#f76400] text-white p-1 px-2 rounded-lg font-semibold">Join Community</button>
                </li>
                <li class="profile-dropdown-container" style="display: none;">
                    <div class="relative">
                        <button class="profile-button flex items-center" onclick="toggleProfileDropdown(event)">
                            <img id="userProfilePic" src="https://raw.githubusercontent.com/Larkaholic/ArtistHub-BaguioCity/master/images/defaultProfile.png" 
                                 alt="Profile" 
                                 class="w-10 h-10 rounded-full object-cover border-2 border-green-500">
                        </button>
                        <div id="profileDropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl z-50">
                            <div class="py-2">
                                <div class="px-4 py-2 border-b border-gray-200">
                                    <p class="text-sm font-semibold text-gray-700" id="profileDropdownName">Loading...</p>
                                    <p class="text-xs text-gray-500" id="profileDropdownEmail">Loading...</p>
                                </div>
                                <a href="javascript:void(0)" onclick="navigateToUserProfile()" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 text-center">View Profile</a>
                                <a href="javascript:void(0)" onclick="openNotificationsModal()" class="flex items-center justify-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 text-center relative">
                                    <div class="flex items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                            <path d="M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z" />
                                        </svg>
                                        Notifications
                                    </div>
                                    <span id="notificationBadge" class="absolute right-3 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5 hidden">0</span>
                                </a>
                                <a href="javascript:void(0)" onclick="navToEvent('./admin/dashboard.html')" class="admin-button block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 text-center" style="display: none;">Admin Dashboard</a>
                                <a href="javascript:void(0)" onclick="openSettingsModal()" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 text-center">Settings</a>
                                <a href="javascript:void(0)" onclick="handleLogout()" class="block px-4 py-2 text-sm text-red-600 hover:bg-gray-100 text-center">Logout</a>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </nav>
    </header>
    
    <div id="flyout-menu" class="fixed top-0 right-0 w-64 h-screen transform translate-x-full transition-transform duration:300 ease-in-out z-40 sm:hidden">
        <div class="glass-header h-full p-6">
            <nav>
                <ul class="flex flex-col space-y-4 mt-5">
                    <li><a href="javascript:void(0)" onclick="navToEvent('/index.html')">Home</a></li>
                    <li><a href="javascript:void(0)" onclick="navToEvent('/index.html#events')">Events</a></li>
                    <li><a href="javascript:void(0)" onclick="navToEvent('/shop/shop.html')">Shop</a></li>
                    <li class="relative">
                        <button id="profileLinkMobile" class="flex items-center w-full justify-center" onclick="toggleNav(event)">
                            <img src="https://raw.githubusercontent.com/Larkaholic/ArtistHub-BaguioCity/master/images/defaultProfile.png" 
                                 alt="Profile" 
                                 class="w-8 h-8 rounded-full object-cover border-2 border-green-500 mr-2">
                            <span>Profile</span>
                        </button>
                        <div id="mobileProfileDropdown" class="hidden mt-2 bg-white rounded-lg shadow-lg border-2 border-black">
                            <div class="px-4 py-3 border-b border-gray-200">
                                <p id="mobileProfileName" class="text-sm font-semibold text-gray-700">Loading...</p>
                                <p id="mobileProfileEmail" class="text-xs text-gray-500">Loading...</p>
                            </div>
                            <div class="py-2">
                                <a href="javascript:void(0)" onclick="navigateToUserProfile()" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">View Profile</a>
                                <a href="javascript:void(0)" onclick="navToEvent('./admin/dashboard.html')" class="admin-button block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" style="display: none;">Admin Dashboard</a>
                                <a href="javascript:void(0)" onclick="openSettingsModal()" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Settings</a>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item hover:bg-green-500 p-1 rounded-lg admin-button" style="display: none;">
                        <a href="javascript:void(0)" onclick="navToEvent('./admin/dashboard.html')">Admin</a>
                    </li>
                    <li id="cartNavMobile" class="hidden">
                        <a href="javascript:void(0)" onclick="window.toggleCart()" class="flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                            </svg>
                            Cart (<span id="cartCountMobile">0</span>)
                        </a>
                    </li>
                    <li class="login-button bg-[#f76400] rounded-md">
                        <button onclick="toggleLoginFlyout(event)" class="nav-login py-2 px-4 text-white rounded-lg w-full">Join Community</button>
                    </li>
                    <li class="logout-button" style="display: none;">
                        <button onclick="handleLogout()" class="py-2 px-4 bg-red-500 text-white rounded-lg w-full">Logout</button>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

    <div id="LoginFlyout" class="flyout fixed inset-0 flex items-center justify-center bg-gray-500 bg-opacity-50 z-50 hidden">
        <!-- Login Form -->
        <div id="loginForm" class="glass-header2 items-center rounded-lg w-96 mx-10" data-aos="zoom-in" data-aos-duration="300">
            <h2 class="flex justify-center font-bold text-2xl my-4">Login</h2>
            <form id="loginFormElement" onsubmit="handleLogin(event)">
                <div class="mx-2 mb-4">
                    <label for="loginEmail" class="block font-medium">Email:</label>
                    <input type="email" id="loginEmail" class="block mt-1 p-2 border border-gray-400 rounded-md w-full" placeholder="Enter Email" required>
                </div>
                <div class="mx-2 mb-4">
                    <label for="loginPassword" class="block font-medium">Password:</label>
                    <input type="password" id="loginPassword" class="block mt-1 p-2 border border-gray-400 rounded-md w-full" placeholder="Enter Password" required>
                </div>
                <div class="flex items-center justify-between mx-20 my-5">
                    <button type="submit" class="confirm py-2 px-4 rounded-xl hover:bg-gray-300">Login</button>
                    <button type="button" class="decline py-2 px-4 rounded-xl hover:bg-gray-300" onclick="toggleLoginFlyout()">Close</button>
                </div>
                <div class="flex items-center justify-center my-4">
                    <div class="border-t border-gray-300 flex-grow mx-4"></div>
                    <span class="text-gray-500">or</span>
                    <div class="border-t border-gray-300 flex-grow mx-4"></div>
                </div>
                <div class="flex justify-center mb-4">
                    <button type="button" onclick="signInWithGoogle(false)" class="confirm flex items-center justify-center gap-2 w-4/5 py-2 px-4 rounded-md hover:bg-gray-300">
                        <svg class="w-5 h-5" viewBox="0 0 24 24">
                            <path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" />
                            <path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" />
                            <path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" />
                            <path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
                        </svg>
                        Continue with Google
                    </button> 
                </div>
                <div class="text-center mb-4">
                    <p>Need an account? <a href="javascript:void(0)" onclick="toggleForms()" class="underline">SIGN UP</a></p>
                </div>
                <div class="text-center mb-4">
                    <p>By logging in, you agree to our <a href="javascript:void(0)" onclick="openTermsModal()" class="termsNcondition underline">Terms and Conditions</a>.</p>
                </div>
            </form>
        </div>
        <!-- register -->
        <div id="registerForm" class="glass-header2 items-center rounded-lg w-96 mx-10 hidden" data-aos="zoom-in" data-aos-duration="300">
            <h2 class="flex justify-center font-bold text-2xl my-4">Register</h2>
            <form onsubmit="return handleRegister(event)">
                <div class="mx-2 mb-4">
                    <label for="registerEmail" class="block font-medium">Email:</label>
                    <input type="email" id="registerEmail" class="block mt-1 p-2 border border-gray-400 rounded-md w-full" placeholder="Enter Email" required>
                </div>
                <div class="mx-2 mb-4">
                    <label for="registerPassword" class="block font-medium">Password:</label>
                    <input type="password" id="registerPassword" class="block mt-1 p-2 border border-gray-400 rounded-md w-full" placeholder="Enter Password" required>
                </div>
                <div class="mx-2 mb-4">
                    <label for="userType" class="block font-medium">Account Type:</label>
                    <select id="userType" class="block mt-1 p-2 border border-gray-400 rounded-md w-full" required>
                        <option value="user">Regular User</option>
                        <option value="artist">Artist</option>
                    </select>
                </div>
                
                <div class="flex items-center justify-between mx-20 my-5">
                    <button type="submit" class="confirm py-2 px-4 rounded-md hover:bg-gray-300">Register</button>
                    <button type="button" class="decline py-2 px-4 rounded-md hover:bg-gray-300" onclick="toggleLoginFlyout()">Close</button>
                </div>
                <div class="flex items-center justify-center my-4">
                    <div class="border-t border-gray-300 flex-grow mx-4"></div>
                    <span class="text-gray-500">or</span>
                    <div class="border-t border-gray-300 flex-grow mx-4"></div>
                </div>      
                <div class="flex justify-center mb-4">
                    <button type="button" onclick="signInWithGoogle(true)" class="confirm flex items-center justify-center gap-2 w-4/5 py-2 px-4 rounded-md hover:bg-gray-300">
                        <svg class="w-5 h-5" viewBox="0 0 24 24">
                            <path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" />
                            <path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" />
                            <path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" />
                            <path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
                        </svg>
                        Continue with Google
                    </button>
                </div>
                <div class="text-center mb-4">
                    <p>Already have an account? <a href="javascript:void(0)" onclick="toggleForms()" class="underline">LOGIN</a></p>
                </div>
                <div class="text-center mb-4">
                    <p>By registering, you agree to our <a href="javascript:void(0)" onclick="openTermsModal()" class="underline text-blue-500">Terms and Conditions</a>.</p>
                </div>
            </form>
        </div>
    </div>

    <main class="hero-section max-w-full h-screen">
        <!-- hero section -->
        <section id="landingPage" class="">
            <div class="banner mt-36 ml-2 sm:ml-36 sm:mt-56 bg-white rounded-3xl bg-clip-padding backdrop-filter backdrop-blur-xl bg-opacity-40 border border-gray-100" data-aos="fade-up" data-aos-duration="1200">
                <h1 class="font-bold text-4xl p-5 tracking-wide ml-5" data-aos="fade-right" data-aos-delay="300">
                A Digital Home for <br> Every <span class="banner-span tracking-tighter" style="color: #f76400;">Cordilleran Artists</span>
                </h1>
                <p class="bannerSub ml-2 p-3 font-normal justify-self-center items-center text-lg" data-aos="fade-left" data-aos-delay="500">
                    Showcase your craft, connect with the community, and grow your artistic journey.
                </p>
                <div class="bannerbuttons flex justify-evenly mt-3 tracking-widest text-normal md:text-lg p-2 gap-2" data-aos="fade-up" data-aos-delay="700">
                    <button class="decline md:p-3 rounded-xl px-3 md:px-3 sm:px-6">Browse Artworks</button>
                    <button onclick="toggleLoginFlyout(event)" class="confirm md:p-3 rounded-xl px-3 md:px-3 sm:px-6">Join as Artist</button>
                </div>
            </div>
        </section>

        <!-- <section id="landingPage" class="flex flex-col md:flex-row w-full h-full items-center overflow-hidden">
            <div class="artist-item position-absolute w-full h-1/2 md:w-1/2 md:h-full flex items-center justify-center p-0">
                <div class="typing-container">
                    <div id="typing-h1-container">
                        <typing-h1 id="typing-h1" class="typing"> -->
                            <!-- dynamic typing effect -->
                        <!-- </typing-h1>
                    </div>
                    <div id="typing-h2-container">
                        <typing-h2 id="typing-h2" class="typing"> -->
                            <!-- dynamic typing effect-->
                        <!-- </typing-h2>
                    </div>
                </div>
            </div> -->
            <!-- <div class="important-events w-full h-1/2 md:w-1/2 md:h-full md:mt-24 overflow-x-auto">
                <div class="glass-header rounded-lg p-4 m-4 max-h-full flex flex-row space-x-4" style="scrollbar-width: thin;" data-aos="fade-left">
                    <div class="event-card">
                        <h3 class="text-xl font-bold mb-2">Welcome to Artist Hub</h3>
                        <p class="text-sm">Check out our upcoming events!</p>
                        <p class="text-sm mt-4">Featured events will appear here.</p>
                    </div>
                </div>
            </div>
        </section> -->

        <div class="introduction flex-col">
            <div class="floatingEvent flex gap-10 rounded-3xl max-w-full justify-self-center bg-white bg-clip-padding backdrop-filter backdrop-blur-md bg-opacity-100 backdrop-saturate-100 backdrop-contrast-125 bg-blend-overlay shadow-xl">
                <div class="dataDiv p-4 w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- Events will be loaded dynamically here -->
                </div>
            </div>
            <div class="mt-12 ">
                <h1 class="head font-bold text-4xl md:text-6xl sm:text-5xl text-center" style="position:relative;" data-aos="fade-up" data-aos-delay="200">
                    A Platform Built to Celebrate and <br>
                    Uplift <span class="underline-artistry font-mono tracking-tighter">Local Artistry</span>
                </h1>
                <div class="flex max-w-full mx-4 sm:mx-32 justify-center mt-4" data-aos="fade-up" data-aos-delay="400">
                    <h2 class="headSub text-center max-w-96 break-keep text-gray-600">
                        Artisthub is a digital platform designed to empower Cordilleran artists by
                        providing a centralized web space to showcase their ta lents, connect with
                        communities, and make more opportunities in the creative industry.
                    </h2>
                </div>
            </div>
        </div>        
        <!-- shop section -->
        <section class="shopPrev h-full">
            <div class="shopHeader max-w-7xl mx-auto mt-24 px-4 md:px-8">
                <!-- Header with Explore title and dropdown -->
                <div class="flex flex-col mb-6" data-aos="fade-up">
                    <div class="flex items-center justify-between mb-4">
                        <h1 class="text-4xl font-bold text-gray-900 md:mr-10" data-aos="fade-right" data-aos-delay="100">Explore</h1>
                        
                        <!-- Search and Categories section -->
                        <div class="flex items-center gap-4" data-aos="fade-left" data-aos-delay="200">
                            <div class="relative">
                                <input class="px-4 py-3 pl-12 rounded-full border border-gray-300 w-80 text-gray-600 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent" 
                                       type="text" 
                                       name="generalSearch" 
                                       id="generalSearch" 
                                       placeholder="Search Artists, Artworks, or Events">
                                <svg class="w-5 h-5 absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                                </svg>
                            </div>
                            <div class="relative">
                                <select class="px-4 py-3 pr-10 rounded-full border border-gray-300 text-gray-600 bg-white appearance-none focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent cursor-pointer" 
                                        name="categ" 
                                        id="categ">
                                    <option value="" disabled selected>Categories</option>
                                    <!-- options to be dynamically loaded here -->
                                </select>
                                <svg class="w-4 h-4 absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Filter buttons section -->
                <div class="flex items-center gap-3 mb-8" data-aos="fade-up" data-aos-delay="300">
                    <div class="dropdown-container relative">
                        <button id="dropdownButton" class="text-4xl font-bold text-orange-500 flex items-center cursor-pointer transition-colors hover:text-orange-600 mr-10" onclick="toggleDropdown()">
                            <span id="dropdownText">Artworks</span>
                            <svg class="w-4 h-4 ml-2 transition-transform duration-200" id="dropdownIcon" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                            </svg>
                        </button>
                        <div id="dropdownMenu" class="dropdown-menu absolute top-full left-0 mt-1 bg-white rounded-lg shadow-lg border border-gray-200 w-32 z-50 hidden">
                            <div class="py-1">
                                <button class="dropdown-item active w-full text-left px-4 py-2 hover:bg-gray-100" data-category="artworks" onclick="selectCategory('artworks')">
                                    <span>Artworks</span>
                                </button>
                                <button class="dropdown-item w-full text-left px-4 py-2 hover:bg-gray-100" data-category="artists" onclick="selectCategory('artists')">
                                    <span>Artists</span>
                                </button>
                                <button class="dropdown-item w-full text-left px-4 py-2 hover:bg-gray-100" data-category="events" onclick="selectCategory('events')">
                                    <span>Events</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <button class="px-6 py-2 bg-orange-500 text-white rounded-full font-medium hover:bg-orange-600 transition-colors">Paintings</button>
                    <button class="px-6 py-2 bg-gray-100 text-gray-700 rounded-full font-medium hover:bg-gray-200 transition-colors">Textiles</button>
                    <button class="px-6 py-2 bg-gray-100 text-gray-700 rounded-full font-medium hover:bg-gray-200 transition-colors">Crafts</button>
                    <button class="px-6 py-2 bg-gray-100 text-gray-700 rounded-full font-medium hover:bg-gray-200 transition-colors">Digital Art</button>
                </div>
                
                <div class="shopFilter">
                    <div class="dropdownFilter">
                        <!-- filter buttons is to be dynamically loaded here -->
                    </div>
                </div>
                <!-- Content containers for different categories -->
                <div class="sampleArts" id="artworksContainer" data-aos="fade-up" data-aos-delay="400">
                    <!-- Artwork cards will be dynamically loaded here -->
                    <div class="loading-spinner my-10 flex justify-center">
                        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"></div>
                    </div>
                    <!-- Added two more sample cards for demonstration -->
                    <div class="artwork-card bg-white rounded-lg shadow-lg overflow-hidden border-2" style="border-color: #f76400;">
                        <div class="relative">
                            <div class="artwork-artist">Sample Artist 1</div>
                            <img 
                                src="https://via.placeholder.com/300x200?text=Sample+Art+1" 
                                alt="Sample Art 1" 
                                class="artwork-image w-full h-40 object-cover"
                                loading="lazy"
                            >
                        </div>
                        <div class="p-4 flex flex-col h-full">
                            <div class="flex-grow">
                                <div class="flex items-center gap-1 mb-1">
                                    <i class="fas fa-palette text-sm text-gray-600"></i>
                                    <h3 class="artwork-title">Sample Artwork 1</h3>
                                </div>
                                <div class="price-container mb-1">
                                    <p class="artwork-price">₱1,000.00</p>
                                </div>
                                <p class="artwork-description text-gray-600">This is a sample description for artwork 1.</p>
                            </div>
                            <a href="./shop/shop.html" class="mt-auto bg-[#f76400] text-white py-2 px-4 rounded text-center hover:bg-amber-600 transition duration-200">
                                <i class="fas fa-shopping-cart mr-1"></i> View in Shop
                            </a>
                        </div>
                    </div>
                    <div class="artwork-card bg-white rounded-lg shadow-lg overflow-hidden border-2" style="border-color: #f76400;">
                        <div class="relative">
                            <div class="artwork-artist">Sample Artist 2</div>
                            <img 
                                src="https://via.placeholder.com/300x200?text=Sample+Art+2" 
                                alt="Sample Art 2" 
                                class="artwork-image w-full h-40 object-cover"
                                loading="lazy"
                            >
                        </div>
                        <div class="p-4 flex flex-col h-full">
                            <div class="flex-grow">
                                <div class="flex items-center gap-1 mb-1">
                                    <i class="fas fa-palette text-sm text-gray-600"></i>
                                    <h3 class="artwork-title">Sample Artwork 2</h3>
                                </div>
                                <div class="price-container mb-1">
                                    <p class="artwork-price">₱2,000.00</p>
                                </div>
                                <p class="artwork-description text-gray-600">This is a sample description for artwork 2.</p>
                            </div>
                            <a href="./shop/shop.html" class="mt-auto bg-[#f76400] text-white py-2 px-4 rounded text-center hover:bg-amber-600 transition duration-200">
                                <i class="fas fa-shopping-cart mr-1"></i> View in Shop
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Artists Grid Container -->
                <div class="artistsGrid hidden" id="artistsContainer">
                    <div id="allArtistsGrid">
                        <!-- Artists will be dynamically loaded here -->
                    </div>
                </div>
                
                <!-- Events Container -->
                <div class="eventsGrid hidden" id="eventsContainer">
                    <div id="allEventsGrid">
                        <!-- Events will be dynamically loaded here -->
                    </div>
                </div>
            </div>
        </section>
    
        <!-- artists section -->
        <!-- <section id="featuredArtistsSection" class="flex flex-col gap-4 p-4">
            title container
            <div class="header text-center py-1 mt-10 w-full flex ml-4 justify-start items-center">
                <h3 class="text-3xl font-bold text-black ml-5">FEATURED ARTISTS</h3>
            </div>

            <div class="relative w-full flex justify-end pr-5">
                <button class="artist-search-btn border-2" style="border-color: #f76400;" onclick="toggleArtistSearch()">
                    <i class="fas fa-search"></i>
                </button>
                <div class="artist-search-container border-2" style="border-color: #f76400;">
                    <input type="text" 
                           id="searchInput" 
                           placeholder="Search artists, specializations, genres..." 
                           class="artist-search-input">
                    <button class="artist-close-btn" onclick="toggleArtistSearch()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            
            artist grid container
            <div class="rounded-lg p-2 overflow-y-auto" style="max-height: 100vh;">
                <div id="featuredArtistsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    artists will dynamically load here
                </div>
            </div>
        </section>
    -->
        
        <!-- through the years -->
        <section class="baguio-timeline-section my-8">
            <div class="header text-center py-1 mt-10 w-full flex ml-4 justify-start items-center" style="position: relative; z-index: 30;" data-aos="fade-up">
                <h3 class="text-3xl font-bold text-black ml-5">THROUGH THE YEARS</h3>
            </div>
            
            <div class="relative w-full flex justify-center mb-2" data-aos="fade-up" data-aos-delay="200">
                <button class="timeline-search-btn border-2 border-green-600" onclick="toggleTimelineSearch()">
                    <i class="fas fa-search"></i>
                </button>
                <div class="search-input-container">
                    <input type="text" 
                           id="timelineSearch" 
                           placeholder="Search through history..." 
                           class="timeline-search-input border-2 border-green-600">
                    <button class="search-close-btn" onclick="toggleTimelineSearch()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <div class="baguio-timeline-backgrounds" data-aos="fade-in" data-aos-delay="400"></div>
            <div class="baguio-timeline-content-wrapper" data-aos="fade-up" data-aos-delay="600">
                <div class="baguio-timeline-navigation"></div>
                <div class="baguio-timeline-content-box">
                    <div class="baguio-timeline-year baguio-timeline-fade-in"></div>
                    <h3 class="baguio-timeline-title baguio-timeline-fade-in"></h3>
                    <p class="baguio-timeline-details baguio-timeline-fade-up"></p>
                </div>
            </div>
        </section>
        
        <!-- footer -->
        <footer class="lrk-footer-wrapper py-8 px-4">
            <div class="container mx-auto flex flex-col md:flex-row justify-between items-center">
                <!-- Brand Section -->
                <div class="footer-brand flex flex-col items-start gap-4 mb-6 md:mb-0 text-left drop-shadow-lg drop-shadow-red-500" data-aos="fade-right" data-aos-delay="200">
                    <img src="https://raw.githubusercontent.com/Larkaholic/ArtistHub-BaguioCity/master/images/artisthubOrange.png" 
                         alt="Artist Hub Logo" 
                         class="footerLogo h-12 md:h-24 object-contain">
                    <div class="footer-description text-left">
                        <p class="text-sm text-white max-w-md">
                            A website that helps local artists in the 
                            Cordillera region to showcase 
                            their talents and artworks to the world.
                        </p>
                    </div>
                </div>
        
                <!-- Navigation and Social Links -->
                <div class="footer-socials-nav flex flex-row items-center md:items-center mr-10 gap-10" data-aos="fade-left" data-aos-delay="400">
                    <!-- Navigation Links -->
                    <nav class="lrk-nav-container f flex flex-col md:flex-col md:space-x-4 mb-4 md:mb-0">
                        <h3 class="font-bold mb-2 md:mb-0">Useful Links</h3>
                        <a href="javascript:void(0)" onclick="navToEvent('./index.html')" class="text-gray-300 hover:text-white">Home</a>
                        <a href="javascript:void(0)" onclick="navToEvent('./index.html#events')" class="text-gray-300 hover:text-white">Events</a>
                        <a href="javascript:void(0)" onclick="navToEvent('./Gallery/gallery.html')" class="text-gray-300 hover:text-white">Gallery</a>
                        <a href="javascript:void(0)" onclick="navToEvent('./index.html#history')" class="text-gray-300 hover:text-white">History</a>
                        <a href="javascript:void(0)" onclick="openContactModal()" class="text-gray-300 hover:text-white">Contact Us</a>
                        <a href="javascript:void(0)"onclick="navToEvent('./Our Team/OurTeam.html')" class="text-gray-300 hover:text-white">Our Team</a>
                    </nav>
        
                    <!-- Social Icons -->
                    <div class="lrk-social-icons-container flex flex-col gap-2 ml-4">
                        <h3 class="font-bold mb-2 md:mb-0">Follow Us</h3>
                        <a href="#facebook" class="lrk-social-link text-gray-300 hover:text-white" aria-label="Facebook">
                            <img class="lrk-social-icon" src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M18.77,7.46H14.55v-1.9c0-.9.6-1.1,1-1.1h3V.5L14.84.5C10.4.5,9.72,3,9.72,7.15V7.46H7v3.4h2.72V20.5h4.83V10.86h4.22Z'/></svg>" alt="Facebook">
                        </a>
                        <a href="#instagram" class="lrk-social-link text-gray-300 hover:text-white" aria-label="Instagram">
                            <img class="lrk-social-icon" src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M12,2.16c3.2,0,3.58,0,4.85.07,3.25.15,4.77,1.69,4.92,4.92.06,1.27.07,1.65.07,4.85s0,3.58-.07,4.85c-.15,3.23-1.04,4.77-4.92,4.92-1.27.06-1.64.07-4.85.07s-3.58,0-4.85-.07c-3.26-.15-4.77-1.7-4.92-4.92-.06-1.27-.07-1.64-.07-4.85s0-3.58.07-4.85C2.38,3.92,3.9,2.38,7.15,2.23,8.42,2.18,8.8,2.16,12,2.16ZM12,0C8.74,0,8.33,0,7.05.07c-4.27.2-6.78,2.71-7,7C0,8.33,0,8.74,0,12s0,3.67.07,4.95c.2,4.27,2.71,6.78,7,7C8.33,24,8.74,24,12,24s3.67,0,4.95-.07c4.27-.2,6.78-2.71,7-7C24,15.67,24,15.26,24,12s0-3.67-.07-4.95c-.2-4.27-2.71-6.78-7-7C15.67,0,15.26,0,12,0Zm0,5.84A6.16,6.16,0,1,0,18.16,12,6.16,6.16,0,0,0,12,5.84ZM12,16a4,4,0,1,1,4-4A4,4,0,0,1,12,16ZM18.41,4.15a1.44,1.44,0,1,0,1.44,1.44A1.44,1.44,0,0,0,18.41,4.15Z'/></svg>" alt="Instagram">
                        </a>
                        <a href="#twitter" class="lrk-social-link text-gray-300 hover:text-white" aria-label="Twitter">
                            <img class="lrk-social-icon" src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M23.95,4.57a10,10,0,0,1-2.82.77,4.96,4.96,0,0,0,2.16-2.72,9.9,9.9,0,0,1-3.12,1.19,4.92,4.92,0,0,0-8.39,4.49A14,14,0,0,1,1.64,3.16,4.92,4.92,0,0,0,3.2,9.72,4.86,4.86,0,0,1,1,9.13v.06a4.93,4.93,0,0,0,3.95,4.83,4.86,4.86,0,0,1-2.23.08,4.93,4.93,0,0,0,4.6,3.42A9.87,9.87,0,0,1,0,19.54a13.94,13.94,0,0,0,7.55,2.21,13.9,13.9,0,0,0,14-13.73c0-.21,0-.42,0-.63A10,10,0,0,0,24,4.59Z'/></svg>" alt="Twitter">
                        </a>
                        <a href="#google" class="lrk-social-link text-gray-300 hover:text-white" aria-label="Google">
                            <img class="lrk-social-icon" src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M12,0C5.37,0,0,5.37,0,12s5.37,12,12,12,12-5.37,12-12S18.63,0,12,0Zm0,19.43A7.43,7.43,0,1,1,19.43,12,7.43,7.43,0,0,1,12,19.43Z'/></svg>" alt="Google">
                        </a>
                        <a href="#youtube" class="lrk-social-link text-gray-300 hover:text-white" aria-label="YouTube">
                            <img class="lrk-social-icon" src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M23.5,6.19a3,3,0,0,0-2.12-2.12C19.54,3.55,12,3.55,12,3.55s-7.54,0-9.38.52A3,3,0,0,0,.5,6.19C0,8.03,0,12,0,12s0,3.97.5,5.81a3,3,0,0,0,2.12,2.12C4.46,20.45,12,20.45,12,20.45s7.54,0,9.38-.52a3,3,0,0,0,2.12-2.12C24,15.97,24,12,24,12S24,8.03,23.5,6.19ZM9.55,15.45V8.55L15.82,12Z'/></svg>" alt="YouTube">
                        </a>
                    </div>
                </div>
            </div>
            <div class="lrk-copyright-section w-full text-center mt-4 md:mt-0">
                Copyright ©2025, Designed and built by <a href="https://github.com/Larkaholic" class="lrk-designer-link">Orillos, Lark Dominique J.</a>
            </div>
        </footer>

        <!-- Contact Us Modal -->
        <div id="contactModal" class="fixed inset-0 flex items-center justify-center bg-gray-500 bg-opacity-50 z-50 hidden">
            <div class="glass-header2 items-center rounded-lg w-96 mx-10 p-6 relative bg-white shadow-xl" data-aos="zoom-in" data-aos-duration="300">
                <button onclick="closeContactModal()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
                <h2 class="text-center font-bold text-2xl mb-6">Contact Us</h2>
                <form data-aos="fade-up" data-aos-delay="200">
                    <div class="mb-4">
                        <label for="contactName" class="block font-medium">Name:</label>
                        <input type="text" id="contactName" class="block mt-1 p-2 border border-gray-400 rounded-md w-full" placeholder="Enter your name" required>
                    </div>
                    <div class="mb-4">
                        <label for="contactEmail" class="block font-medium">Email:</label>
                        <input type="email" id="contactEmail" class="block mt-1 p-2 border border-gray-400 rounded-md w-full" placeholder="Enter your email" required>
                    </div>
                    <div class="mb-4">
                        <label for="contactMessage" class="block font-medium">Message:</label>
                        <textarea id="contactMessage" class="block mt-1 p-2 border border-gray-400 rounded-md w-full" rows="4" placeholder="Enter your message" required></textarea>
                    </div>
                    <div class="flex justify-end">
                        <button type="button" onclick="closeContactModal()" class="px-4 py-2 bg-gray-300 text-black rounded-lg hover:bg-gray-400 mr-2">Cancel</button>
                        <button type="submit" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Send</button>
                    </div>
                </form>
            </div>
        </div>

        <script>
            function openContactModal() {
                document.getElementById('contactModal').classList.remove('hidden');
            }

            function closeContactModal() {
                document.getElementById('contactModal').classList.add('hidden');
            }
        </script>

    </main>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            AOS.init({
                duration: 1500,
                once: false,
                offset: 100,
                easing: 'ease-in-out'
            });
            
            // Re-initialize AOS when content is dynamically loaded
            const observer = new MutationObserver(() => {
                AOS.refresh();
            });
            
            // Observe changes in containers that have dynamic content
            const containers = [
                document.getElementById('artworksContainer'),
                document.getElementById('artistsContainer'),
                document.getElementById('eventsContainer'),
                document.querySelector('.dataDiv'),
                document.querySelector('.baguio-timeline-content-box')
            ];
            
            containers.forEach(container => {
                if (container) {
                    observer.observe(container, {
                        childList: true,
                        subtree: true
                    });
                }
            });
        });
    </script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>

    <!-- Move other module scripts after main content -->
    <script type="module" src="./js/ggl.js"></script>
    <script type="module" src="./js/firebase-config.js"></script>
    <script type="module" src="./js/auth.js"></script>
    <script type="module" src="./js/loadArtists.js"></script>
    <script type="module" src="./js/timeline.js"></script>
    <script type="module" src="./js/search.js"></script>
    <script type="module" src="./js/navigation.js"></script>
    <script src="./script.js" defer></script>
    <script type="module" src="./js/shop-preview.js"></script>

    <div id="userMenu" class="hidden">
        <div class="glass-header rounded-lg p-4">
            <nav>
                <ul>
                    <li><a href="./profile/profile.html">Profile</a></li>
                </ul>
            </nav>
        </div>
    </div>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script type="module">
        import { ensureStylesLoaded } from './js/utils.js';
        
        document.addEventListener('DOMContentLoaded', function() {
            const requiredStyles = [
                'styles.css',
                'https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css',
                'https://unpkg.com/swiper/swiper-bundle.min.css',
                'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css',
                'https://unpkg.com/aos@2.3.1/dist/aos.css'
            ];
            ensureStylesLoaded(requiredStyles);
        });
    </script>
    

    <!-- Single clean style block -->
    <style>
        .glass-header {
            background: rgba(255, 255, 255, 1);
            border-radius: 16px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(19.8px);
            -webkit-backdrop-filter: blur(19.8px);
            border: 1px solid rgba(255, 255, 255, 0.01);
        }

        #events {
            background-color: #F4F8FF;
        }
    </style>

    <!-- Consolidated Scripts -->
    <script>
        function toggleLoginFlyout(event) {
            if (event) event.preventDefault();
            
            // Hide the flyout menu if it's open
            const flyoutMenu = document.getElementById('flyout-menu');
            if (flyoutMenu && !flyoutMenu.classList.contains('translate-x-full')) {
                flyoutMenu.classList.add('translate-x-full');
                document.body.style.overflow = '';
            }
            
            const flyout = document.getElementById('LoginFlyout');
            flyout.classList.toggle('hidden');
        }

        function toggleNav() {
            const menu = document.getElementById('flyout-menu');
            menu.classList.toggle('translate-x-full');
            document.body.style.overflow = menu.classList.contains('translate-x-full') ? '' : 'hidden';
        }
        window.toggleNav = toggleNav;
    </script>

    <script>
        function toggleTimelineSearch() {
            const searchContainer = document.querySelector('.search-input-container');
            const searchInput = document.getElementById('timelineSearch');
            const searchBtn = document.querySelector('.timeline-search-btn');
            
            searchContainer.classList.toggle('expanded');
            
            if (searchContainer.classList.contains('expanded')) {
                searchBtn.style.opacity = '0';
                setTimeout(() => {
                    searchInput.focus();
                }, 300);
            } else {
                searchBtn.style.opacity = '1';
                searchInput.value = '';
                // Trigger search reset
                if (window.filterTimelineEvents) {
                    window.filterTimelineEvents('');
                }
            }
        }

        function toggleArtistSearch() {
            const searchContainer = document.querySelector('.artist-search-container');
            const searchInput = document.getElementById('searchInput');
            const searchBtn = document.querySelector('.artist-search-btn');
            
            searchContainer.classList.toggle('expanded');
            
            if (searchContainer.classList.contains('expanded')) {
                searchBtn.style.opacity = '0';
                setTimeout(() => {
                    searchInput.focus();
                }, 300);
            } else {
                searchBtn.style.opacity = '1';
                searchInput.value = '';
                if (window.resetArtistSearch) {
                    window.resetArtistSearch();
                }
            }
        }

        function toggleProfileDropdown(event) {
            event.preventDefault();
            const dropdown = document.getElementById('profileDropdown');
            dropdown.classList.toggle('hidden');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('profileDropdown');
            const profileButton = document.querySelector('.profile-button');
            
            if (!profileButton.contains(event.target) && !dropdown.contains(event.target)) {
                dropdown.classList.add('hidden');
            }
        });
        
        // Ensure the flyout menu closes when clicking anywhere else
        document.addEventListener('click', function(event) {
            const flyoutMenu = document.getElementById('flyout-menu');
            const burgerIcon = document.querySelector('.burger-icon');
            
            if (flyoutMenu && burgerIcon && 
                !flyoutMenu.contains(event.target) && 
                !burgerIcon.contains(event.target) &&
                !flyoutMenu.classList.contains('translate-x-full')) {
                toggleNav();
            }
        });
    </script>
    <script type="module" src="./js/loadEvents.js"></script>
    <script type="module" src="./js/profileDropdown.js"></script>
    <script type="module" src="./js/profile-navigation.js"></script>
    <script type="module" src="./js/notifications.js"></script>

    <script type="module">
        import { initProfileDropdown } from './js/profileDropdown.js';
        import { initNotifications } from './js/notifications.js';
        document.addEventListener('DOMContentLoaded', function() {
            initProfileDropdown();
            initNotifications();
        });
    </script>

  
    <script type="module">
        import { auth } from './js/firebase-config.js';
        // Make handleProfileNavigation available globally
        window.handleProfileNavigation = async () => {
            try {
                const user = auth.currentUser;
                if (!user) {
                    // If no user is signed in, first check if auth is still initializing
                    const authCheck = new Promise((resolve) => {
                        const unsubscribe = auth.onAuthStateChanged((user) => {
                            unsubscribe();
                            resolve(user);
                        });
                    });
                    const finalUser = await authCheck;
                    if (!finalUser) {
                        alert('Please login to view your profile');
                        toggleLoginFlyout();
                        return;
                    }
                }
                // Construct the profile URL
                const profileUrl = `profile/profile.html?id=${auth.currentUser.uid}`;
                window.location.href = profileUrl;
            } catch (error) {
                console.error('Profile navigation error:', error);
                alert('There was an error accessing your profile. Please try again.');
            }
        };

        // Update mobile profile link behavior
        document.addEventListener('DOMContentLoaded', () => {
            const mobileProfileLink = document.querySelector('#flyout-menu [onclick*="profile"]');
            if (mobileProfileLink) {
                mobileProfileLink.onclick = (e) => {
                    e.preventDefault();
                    handleProfileNavigation();
                };
            }
        });
    </script>

    <script type="module">
        import { auth } from './js/firebase-config.js';
        // Update the profile navigation function
        window.handleEditProfile = async () => {
            try {
                const user = auth.currentUser;
                if (!user) {
                    const authCheck = new Promise((resolve) => {
                        const unsubscribe = auth.onAuthStateChanged((user) => {
                            unsubscribe();
                            resolve(user);
                        });
                    });
                    const finalUser = await authCheck;
                    if (!finalUser) {
                        alert('Please login to edit your profile');
                        toggleLoginFlyout();
                        return;
                    }
                }
                // Go directly to edit profile page
                const editProfileUrl = `/profile/edit-profile.html?id=${auth.currentUser.uid}`;
                window.location.href = editProfileUrl;
            } catch (error) {
                console.error('Profile navigation error:', error);
                alert('There was an error accessing your profile. Please try again.');
            }
        };

        // Update mobile profile link behavior
        document.addEventListener('DOMContentLoaded', () => {
            const mobileProfileLink = document.querySelector('#flyout-menu [onclick*="profile"]');
            if (mobileProfileLink) {
                mobileProfileLink.onclick = (e) => {
                    e.preventDefault();
                    handleEditProfile();
                };
            }
        });
    </script>
    
    <!-- User Type Selection Modal -->
    <div id="userTypeModal" class="fixed inset-0 flex items-center justify-center bg-gray-500 bg-opacity-50 hidden" style="z-index: 3000;">
        <div class="glass-header2 items-center rounded-lg w-96 mx-10 p-6 relative bg-white shadow-xl" data-aos="zoom-in" data-aos-duration="300">
            <button onclick="cancelUserTypeSelection()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h2 class="text-center font-bold text-2xl mb-6">Select Account Type</h2>
            <div class="flex flex-col gap-4" data-aos="fade-up" data-aos-delay="200">
                <button onclick="selectUserType('artist')" class="py-4 px-6 rounded-lg hover:bg-gray-100 transition-all border-2 border-green-500 hover:border-green-600">
                    <h3 class="font-bold text-lg mb-2">Artist</h3>
                    <p class="text-sm text-gray-600">Create an artist profile to showcase your work and connect with art enthusiasts</p>
                </button>
                <button onclick="selectUserType('user')" class="py-4 px-6 rounded-lg hover:bg-gray-100 transition-all border-2 border-blue-500 hover:border-blue-600">
                    <h3 class="font-bold text-lg mb-2">Regular User</h3>
                    <p class="text-sm text-gray-600">Browse artworks, follow artists, and participate in the community</p>
                </button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initProfileDropdown } from './js/profileDropdown.js';
        document.addEventListener('DOMContentLoaded', initProfileDropdown);
    </script>

    <script>   
        // Global variable to store Firebase auth instance
        window.firebaseAuth = null;
    </script>
    
    <script type="module">
        import { auth } from './js/firebase-config.js';
        // Assign the auth instance to the global variable
        window.firebaseAuth = auth;
        
        // Make handleProfileNavigation available globally
        window.handleProfileNavigation = async () => {
            try {
                const user = window.firebaseAuth.currentUser;
                if (!user) {
                    // If no user is signed in, first check if auth is still initializing
                    const authCheck = new Promise((resolve) => {
                        const unsubscribe = window.firebaseAuth.onAuthStateChanged((user) => {
                            unsubscribe();
                            resolve(user);
                        });
                    });
                    const finalUser = await authCheck;
                    if (!finalUser) {
                        alert('Please login to view your profile');
                        toggleLoginFlyout();
                        return;
                    }
                }
                // Construct the profile URL
                const profileUrl = `profile/profile.html?id=${window.firebaseAuth.currentUser.uid}`;
                window.location.href = profileUrl;
            } catch (error) {
                console.error('Profile navigation error:', error);
                alert('There was an error accessing your profile. Please try again.');
            }
        };

        // Update mobile profile link behavior
        document.addEventListener('DOMContentLoaded', () => {
            const mobileProfileLink = document.querySelector('#flyout-menu [onclick*="profile"]');
            if (mobileProfileLink) {
                mobileProfileLink.onclick = (e) => {
                    e.preventDefault();
                    handleProfileNavigation();
                };
            }
        });
    </script>

    <script type="module">
        import { auth } from './js/firebase-config.js';
        // Update the profile navigation function
        window.handleEditProfile = async () => {
            try {
                const user = window.firebaseAuth.currentUser;
                if (!user) {
                    const authCheck = new Promise((resolve) => {
                        const unsubscribe = window.firebaseAuth.onAuthStateChanged((user) => {
                            unsubscribe();
                            resolve(user);
                        });
                    });
                    const finalUser = await authCheck;
                    if (!finalUser) {
                        alert('Please login to edit your profile');
                        toggleLoginFlyout();
                        return;
                    }
                }
                // Go directly to edit profile page
                const editProfileUrl = `/profile/edit-profile.html?id=${window.firebaseAuth.currentUser.uid}`;
                window.location.href = editProfileUrl;
            } catch (error) {
                console.error('Profile navigation error:', error);
                alert('There was an error accessing your profile. Please try again.');
            }
        };

        // Update mobile profile link behavior
        document.addEventListener('DOMContentLoaded', () => {
            const mobileProfileLink = document.querySelector('#flyout-menu [onclick*="profile"]');
            if (mobileProfileLink) {
                mobileProfileLink.onclick = (e) => {
                    e.preventDefault();
                    handleEditProfile();
                };
            }
        });
    </script>
    
    <script type="module">
        import { auth } from './js/firebase-config.js';
        // Make handleLogout globally accessible
        window.handleLogout = async () => {
            try {
                await window.firebaseAuth.signOut();
                alert('You have been logged out successfully.');
                window.location.reload();
            } catch (error) {
                console.error('Logout error:', error);
                alert('There was an error during logout. Please try again.');
            }
        };
    </script>

    <div class="profile-dropdown-overlay" id="profileDropdownOverlay"></div>
    <!-- Settings Modal -->
    <div id="settingsModal" class="fixed inset-0 flex items-center justify-center bg-gray-500 bg-opacity-50 z-10 hidden">
        <div class="glass-header2 items-center rounded-lg w-96 mx-10 p-6 relative bg-white shadow-xl">
            <button onclick="closeSettingsModal()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <div id="settingsMainView">
                <h2 class="text-center font-bold text-2xl mb-6">Account Settings</h2>
                <div class="flex flex-col gap-4">
                    <button onclick="handleEditProfile()" class="py-4 px-6 rounded-lg hover:bg-gray-100 transition-all border-2 border-green-500 hover:border-green-600 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                        <div class="text-left">
                            <h3 class="font-bold text-lg">Edit Profile</h3>
                            <p class="text-sm text-gray-600">Update your personal information</p>
                        </div>
                    </button>
                    <button onclick="showPasswordChangeForm()" class="py-4 px-6 rounded-lg hover:bg-gray-100 transition-all border-2 border-blue-500 hover:border-blue-600 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                        </svg>
                        <div class="text-left">
                            <h3 class="font-bold text-lg">Change Password</h3>
                            <p class="text-sm text-gray-600">Update your account security</p>
                        </div>
                    </button>
                </div>
            </div>
            <div id="passwordChangeForm" class="hidden">
                <h2 class="text-center font-bold text-2xl mb-6">Change Password</h2>
                <!-- Add error and success message containers -->
                <div id="passwordChangeError" class="hidden p-4 mb-4 text-red-700 bg-red-100 rounded-lg"></div>
                <div id="passwordChangeSuccess" class="hidden p-4 mb-4 text-green-700 bg-green-100 rounded-lg"></div>
                
                <form onsubmit="submitPasswordChange(event)" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Current Password</label>
                        <input type="password" id="currentPassword" required 
                               class="mt-1 block w-full rounded-md border-2 border-gray-300 p-2 focus:border-green-500 focus:ring focus:ring-green-200">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">New Password</label>
                        <input type="password" id="newPassword" required 
                               pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{8,}$"
                               class="mt-1 block w-full rounded-md border-2 border-gray-300 p-2 focus:border-green-500 focus:ring focus:ring-green-200">
                        <p class="mt-1 text-sm text-gray-500">
                            Password must be at least 8 characters and include:
                            <br>• One uppercase letter
                            <br>• One lowercase letter
                            <br>• One number
                        </p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Confirm New Password</label>
                        <input type="password" id="confirmPassword" required 
                               class="mt-1 block w-full rounded-md border-2 border-gray-300 p-2 focus:border-green-500 focus:ring focus:ring-green-200">
                    </div>
                    <div class="flex justify-between pt-4">
                        <button type="button" onclick="hidePasswordChangeForm()" 
                                class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">
                            Back
                        </button>
                        <button type="submit" 
                                class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700">
                            Update Password
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Notifications Modal -->
    <div id="notificationsModal" class="fixed inset-0 flex items-center justify-center bg-gray-500 bg-opacity-50 z-10 hidden">
        <div class="glass-header2 items-center rounded-lg w-96 mx-10 p-6 relative bg-white shadow-xl">
            <button onclick="closeNotificationsModal()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h2 class="text-center font-bold text-2xl mb-6">Notifications</h2>
            <div id="notificationsList" class="overflow-y-auto max-h-64">
                <!-- Notifications will be loaded here -->
                <div class="text-center text-gray-500 py-4">No new notifications</div>
            </div>
        </div>
    </div>

    <!-- Add notification functions -->
    <script>
        function openNotificationsModal() {
            document.getElementById('notificationsModal').classList.remove('hidden');
        }

        function closeNotificationsModal() {
            document.getElementById('notificationsModal').classList.add('hidden');
        }

        // Make functions globally accessible
        window.openNotificationsModal = openNotificationsModal;
        window.closeNotificationsModal = closeNotificationsModal;
    </script>

    <!-- Add script initialization for Cloudinary -->
    <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>
    
    <div id="termsModal" class="fixed inset-0 flex items-center justify-center bg-gray-500 bg-opacity-50 z-50 hidden">
        <div class="glass-header2 items-center rounded-lg w-96 mx-10 p-6 relative bg-white shadow-xl">
            <button onclick="closeTermsModal()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h2 class="text-center font-bold text-2xl mb-6">Terms and Conditions</h2>
            <div class="overflow-y-auto max-h-64 text-sm text-gray-700">
                <p>Welcome to ArtistHub-BaguioCity. These Terms and Conditions ("Terms") govern your access to and use of our website, services, and features (collectively, the "Platform"). By using our Platform, you agree to comply with and be bound by these Terms.</p>
                <hr class="my-4">
                <h3 class="font-bold">1. Eligibility</h3>
                <p>You must be at least 18 years old to register as an artist, create events, or make purchases on ArtistHub-BaguioCity. Users under 18 may browse the site under the supervision of a guardian.</p>
                <h3 class="font-bold mt-4">2. User Accounts</h3>
                <ul class="list-disc ml-5">
                    <li>You agree to provide accurate and complete information when creating an account.</li>
                    <li>You are responsible for maintaining the confidentiality of your login credentials.</li>
                    <li>ArtistHub-BaguioCity reserves the right to suspend or terminate accounts that violate our policies.</li>
                </ul>
                <h3 class="font-bold mt-4">3. Artist Verification</h3>
                <ul class="list-disc ml-5">
                    <li>Artists must undergo a manual background check before their profile is verified.</li>
                    <li>Only verified artists may upload artworks, post events, or receive buyer inquiries.</li>
                    <li>Verification does not constitute endorsement or guarantee of any kind.</li>
                </ul>
                <h3 class="font-bold mt-4">4. Use of the Platform</h3>
                <ul class="list-disc ml-5">
                                       <li>Use the Platform for lawful purposes only.</li>
                    <li>Not post or distribute harmful, offensive, or copyrighted materials without permission.</li>
                    <li>Not use the site to harass, threaten, or impersonate others.</li>
                </ul>
                <h3 class="font-bold mt-4">5. Artwork Listings & Events</h3>
                <ul class="list-disc ml-5">
                    <li>Artists are solely responsible for the accuracy and legality of their uploaded content, including artworks, descriptions, and event details.</li>
                    <li>ArtistHub-BaguioCity may remove any content that violates these Terms or receives valid complaints.</li>
                </ul>
                <h3 class="font-bold mt-4">6. Sales and Transactions</h3>
                <ul class="list-disc ml-5">
                    <li>Purchases do not occur directly on the site; instead, buyer details are collected via a form and emailed to the artist for further discussion.</li>
                    <li>ArtistHub-BaguioCity is not responsible for completed or incomplete transactions between buyers and artists.</li>
                    <li>We encourage all parties to communicate clearly and confirm details before any payment or transfer.</li>
                </ul>
                <h3 class="font-bold mt-4">7. Intellectual Property</h3>
                <ul class="list-disc ml-5">
                    <li>All artworks remain the property of the respective artists.</li>
                    <li>Users may not reproduce, distribute, or use artworks without explicit permission from the artist.</li>
                    <li>ArtistHub-BaguioCity retains the right to use uploaded artworks for promotional purposes (e.g., social media, marketing), with proper credit to the artist.</li>
                </ul>
                <h3 class="font-bold mt-4">8. Privacy Policy</h3>
                <p>By using this site, you agree to our Privacy Policy which governs how we collect, use, and protect your personal information.</p>
                <h3 class="font-bold mt-4">9. Termination</h3>
                <p>We reserve the right to suspend or terminate user accounts that violate these Terms or engage in fraudulent, harmful, or abusive behavior.</p>
                <h3 class="font-bold mt-4">10. Changes to Terms</h3>
                <p>We may update these Terms from time to time. Continued use of the Platform after changes constitutes acceptance of the new Terms.</p>
                <h3 class="font-bold mt-4">11. Contact Us</h3>
                <p>For any questions or concerns regarding these Terms, you may contact us at: <a href="mailto:Artisthubcar@gmail.com" class="text-blue-500 underline">Artisthubcar@gmail.com</a></p>
            </div>
            <div class="flex justify-end mt-4">
                <button onclick="closeTermsModal()" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Close</button>
            </div>
        </div>
    </div>
    <script>
        function openTermsModal() {
            document.getElementById('termsModal').classList.remove('hidden');
        }

        function closeTermsModal() {
            document.getElementById('termsModal').classList.add('hidden');
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="./js/contact.js"></script>
</body>
</html>